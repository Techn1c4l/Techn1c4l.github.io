import{L as B,O as l,P as u,Q as n,R as t,au as d,T as o,V as f,S as c,av as k,r as E,a as b,q as Q,t as V,X as G,a1 as q,$ as x,Y as L,W as v,ar as R,at as A,aU as O}from"./index-CO9n1Tws.js";import{C as j}from"./ClosePopup-CYRRlbH2.js";import{u as w}from"./vue-i18n-Ci0i4QWW.js";import{u as S}from"./use-dialog-plugin-component-Ch1TYJrn.js";import{N as H,O as I,$ as T,V as U,A as W,W as z,q as F}from"./_plugin-vue_export-helper-D0AqdkS5.js";import{_ as M}from"./TooltipButton.vue_vue_type_script_setup_true_lang-FDpwtNzH.js";import{P as X}from"./PlayerCharacterIcon-CLmVi5JE.js";import{_ as Y}from"./EmptyPlaceholder.vue_vue_type_script_setup_true_lang-BFJLcYJJ.js";const J={class:"col-auto"},K={class:"col fit"},Z={class:"bluff-character"},ee=B({__name:"PlayerCard",props:{edition:{type:String,required:!0},character:{type:Object,required:!0}},setup(m){const r=m,{t:p}=w({});return(_,i)=>(l(),u(k,null,{default:n(()=>[t(d,{class:"row items-center q-col-gutter-x-sm q-pa-xs"},{default:n(()=>[o("div",J,[t(X,{edition:r.edition,character:r.character.Name,size:"6rem"},null,8,["edition","character"])]),o("div",K,[o("span",Z,f(c(p)(r.character.Label)),1)])]),_:1}),i[0]||(i[0]=o("span",{class:"q-focus-helper"},null,-1))]),_:1}))}}),ae={class:"col"},te={class:"text-subtitle1"},se={class:"col-auto row items-center q-col-gutter-x-sm"},oe={class:"col-auto"},re={class:"col-auto"},ne={key:0,class:"column fit no-wrap q-col-gutter-y-sm"},ie=B({__name:"BluffDialog",props:{edition:{type:String,required:!0}},emits:[...S.emits],setup(m){const r=m,{dialogRef:p,onDialogHide:_}=S(),{t:i}=w({}),s=E([]),g=b(()=>H(r.edition)),C=b(()=>{if(g.value===void 0)return[];const a=s.value.map(e=>e.Name);return g.value.Characters.filter(e=>!a.includes(e.Name))});function P(){try{N(T.get().BluffCharacters)}catch{}}function y(){z(s.value.map(a=>a.Name))}function N(a){s.value.push(...C.value.filter(e=>a.includes(e.Name)))}function D(a){s.value=U(s.value,e=>e.Name==a),y()}async function $(){const a=await W(r.edition,s.value.map(e=>e.Name),!0);a!==void 0&&(N(a),y())}return Q(()=>{if(!I(r.edition)){_();return}P()}),(a,e)=>(l(),u(O,{ref_key:"dialogRef",ref:p,onHide:e[1]||(e[1]=()=>c(_)()),persistent:""},{default:n(()=>[t(k,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:n(()=>[t(d,{class:"col-auto row items-center justify-between"},{default:n(()=>[o("div",ae,[o("div",te,f(c(i)("Game.Bluff")),1)]),o("div",se,[o("div",oe,[t(M,{label:c(i)("Game.AddCharacter"),disable:C.value.length<1,onClick:e[0]||(e[0]=()=>$()),icon:"sym_s_add",round:"",flat:"","no-caps":""},null,8,["label","disable"])]),o("div",re,[V(t(G,{icon:"s_close",round:"",flat:""},null,512),[[j]])])])]),_:1}),t(q),s.value.length>0?(l(),u(d,{key:0,class:"col-auto bluff-caption text-center"},{default:n(()=>[x(f(c(i)("Game.BluffCaption")),1)]),_:1})):L("",!0),t(q),t(d,{class:"col grid scroll"},{default:n(()=>[s.value.length>0?(l(),v("div",ne,[(l(!0),v(R,null,A(s.value,h=>(l(),v("div",{key:h.Name,class:"col-auto"},[t(ee,{class:"cursor-pointer q-hoverable",edition:r.edition,character:h,onClick:()=>D(h.Name),bordered:"",flat:""},null,8,["edition","character","onClick"])]))),128))])):(l(),u(Y,{key:1},{default:n(()=>[x(f(c(i)("General.ListEmpty")),1)]),_:1}))]),_:1})]),_:1})]),_:1},512))}}),he=F(ie,[["__scopeId","data-v-eb12f6cc"]]);export{he as default};
