import{L as D,O as i,P,Q as l,R as s,au as C,T as e,V as b,S as r,av as x,r as q,a as f,t as $,X as L,a1 as O,W as _,ar as A,at as j,Y as k,aU as E}from"./index-CO9n1Tws.js";import{Q as I}from"./QSelect-DNR-3BS-.js";import{C as H}from"./ClosePopup-CYRRlbH2.js";import{u as Q}from"./vue-i18n-Ci0i4QWW.js";import{u as w}from"./use-dialog-plugin-component-Ch1TYJrn.js";import{N,T as U,G as z,V as F,A as K,q as W}from"./plugin-vue_export-helper-D0AqdkS5.js";import{P as X}from"./PlayerCharacterIcon-CLmVi5JE.js";import{_ as Y}from"./TooltipButton.vue_vue_type_script_setup_true_lang-FDpwtNzH.js";const J={class:"col-auto"},M={class:"col-auto"},Z={class:"bluff-character"},S=D({__name:"PlayerToken",props:{edition:{type:String,required:!0},character:{type:Object,required:!0}},setup(h){const a=h,{t:g}=Q({});return(V,p)=>(i(),P(x,null,{default:l(()=>[s(C,{class:"column no-wrap items-center q-col-gutter-x-sm q-pa-sm"},{default:l(()=>[e("div",J,[s(X,{edition:a.edition,character:a.character.Name,size:"6rem"},null,8,["edition","character"])]),e("div",M,[e("span",Z,b(r(g)(a.character.Label)),1)])]),_:1}),p[0]||(p[0]=e("span",{class:"q-focus-helper"},null,-1))]),_:1}))}}),ee={class:"col"},te={class:"text-subtitle1"},ae={class:"col-auto row items-center q-col-gutter-x-sm"},oe={class:"col-auto"},se={class:"col-auto"},ne={class:"column fit no-wrap q-col-gutter-y-sm"},ie={class:"col-auto"},re={class:"col-auto self-center"},le={class:"col-auto action-caption self-center"},ce={key:0,class:"col-auto row justify-center items-center q-col-gutter-sm"},ue=D({__name:"ActionDialog",props:{edition:{type:String,required:!0}},emits:[...w.emits],setup(h){const a=h,{dialogRef:g,onDialogOK:V,onDialogHide:p}=w(),{t:c}=Q({}),v=q(void 0),u=q([]),y=f(()=>N(a.edition)),G=f(()=>{const o=N(a.edition);return o===void 0?[]:o.Actions}),B=f(()=>G.value.map(o=>({value:o.Name,label:c(o.Title)}))),n=f(()=>{if(v.value!==void 0)return U(a.edition,v.value)}),d=f(()=>{if(n.value!==void 0)return z(a.edition,n.value.Character)});function T(o){u.value=F(u.value,t=>t.Name==o)}async function R(){if(d.value===void 0||y.value===void 0)return;const o=await K(a.edition,[...u.value.map(t=>t.Name),d.value.Name],!0);o!==void 0&&u.value.push(...y.value.Characters.filter(t=>o.includes(t.Name)))}return(o,t)=>(i(),P(E,{ref_key:"dialogRef",ref:g,onHide:t[2]||(t[2]=()=>r(p)())},{default:l(()=>[s(x,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:l(()=>[s(C,{class:"col-auto row items-center justify-between"},{default:l(()=>[e("div",ee,[e("div",te,b(r(c)("Game.Action")),1)]),e("div",ae,[e("div",oe,[s(Y,{label:r(c)("Game.AddCharacter"),disable:n.value===void 0||d.value===void 0||!n.value.IsTargeted,onClick:t[0]||(t[0]=()=>R()),icon:"sym_s_add",round:"",flat:"","no-caps":""},null,8,["label","disable"])]),e("div",se,[$(s(L,{icon:"s_close",round:"",flat:""},null,512),[[H]])])])]),_:1}),s(O),s(C,{class:"col grid scroll fit"},{default:l(()=>[e("div",ne,[e("div",ie,[s(I,{modelValue:v.value,"onUpdate:modelValue":t[1]||(t[1]=m=>v.value=m),options:B.value,label:r(c)("Game.Action"),behavior:"menu","map-options":"","emit-value":"","hide-bottom-space":"",outlined:""},null,8,["modelValue","options","label"])]),n.value!==void 0&&d.value!==void 0?(i(),_(A,{key:0},[e("div",re,[s(S,{edition:a.edition,character:d.value,bordered:"",flat:""},null,8,["edition","character"])]),e("div",le,b(r(c)(n.value.Description)),1),n.value.IsTargeted?(i(),_("div",ce,[(i(!0),_(A,null,j(u.value,m=>(i(),_("div",{key:m.Name,class:"col-auto"},[s(S,{class:"cursor-pointer q-hoverable",edition:a.edition,character:m,onClick:()=>T(m.Name),bordered:"",flat:""},null,8,["edition","character","onClick"])]))),128))])):k("",!0)],64)):k("",!0)])]),_:1})]),_:1})]),_:1},512))}}),Ce=W(ue,[["__scopeId","data-v-18dc6775"]]);export{Ce as default};
