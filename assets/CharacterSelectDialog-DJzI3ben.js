import{L as K,r as W,a as f,O as n,P as p,Q as l,R as t,av as X,au as S,T as _,V as C,S as i,t as k,X as b,a1 as N,W as d,ar as m,at as Q,$ as L,b0 as Y,Y as T,a8 as $,aT as z,a0 as J,aU as M}from"./index-CO9n1Tws.js";import{N as Z,U as ee,e as te,y as x,w as ae,x as g,R as le,q as oe}from"./_plugin-vue_export-helper-D0AqdkS5.js";import{C as se}from"./ClosePopup-CYRRlbH2.js";import{u as re}from"./vue-i18n-Ci0i4QWW.js";import{u as D}from"./use-dialog-plugin-component-Ch1TYJrn.js";import{G as ne}from"./Character.Utilities-D-BYvY_2.js";import{P as ie}from"./PlayerCharacterIcon-CLmVi5JE.js";const ce={class:"col"},ue={class:"text-subtitle1"},de={class:"col-auto"},me=K({__name:"CharacterSelectDialog",props:{edition:{type:String,required:!0},restrictedCharacters:{type:Array,required:!1,default:()=>[]},multiple:{type:Boolean,required:!1,default:!1}},emits:[...D.emits],setup(q){const r=q,{dialogRef:A,onDialogOK:h,onDialogHide:B}=D(),{t:u}=re({}),c=W([]),I=f(()=>{const e=Z(r.edition);return e===void 0?[]:e.Characters.filter(a=>!r.restrictedCharacters.includes(a.Name))}),P=f(()=>{const e=[];let a;for(const o of I.value)a=e.find(s=>s.Name==o.Type),a!==void 0?a.Items.push(o):e.push({Name:o.Type,Label:ne(o.Type),Items:[structuredClone(o)]});return e}),R=f(()=>!r.multiple||c.value.length>0),{ButtonStyle:V,ComponentColor:w}=ee();function v(e){return c.value.includes(e)}function G(e){c.value.push(e)}function U(e){c.value=le(c.value,e)}function O(e,a){a?G(e):U(e)}function E(e){h({Characters:[e]})}function F(){h({Characters:c.value})}function y(e,a){O(e,a)}function H(e){r.multiple?y(e,!v(e)):E(e)}return(e,a)=>(n(),p(M,{ref_key:"dialogRef",ref:A,onHide:a[1]||(a[1]=()=>i(B)())},{default:l(()=>[t(X,{class:"q-dialog-plugin dialog-card column no-wrap","non-square":""},{default:l(()=>[t(S,{class:"col-auto row items-center justify-between"},{default:l(()=>[_("div",ce,[_("div",ue,C(i(u)("Game.SelectCharacter")),1)]),_("div",de,[k(t(b,{icon:"s_close",round:"",flat:""},null,512),[[se]])])]),_:1}),t(N),t(S,{class:"col grid scroll fit q-pa-none"},{default:l(()=>[t(te,{class:"scroll",separator:""},{default:l(()=>[(n(!0),d(m,null,Q(P.value,o=>(n(),d(m,{key:o.Name},[t(x,{header:""},{default:l(()=>[L(C(i(u)(o.Label)),1)]),_:2},1024),(n(!0),d(m,null,Q(o.Items,s=>k((n(),p(ae,{key:s.Name,onClick:()=>H(s.Name),clickable:""},{default:l(()=>[r.multiple?(n(),p(g,{key:0,side:""},{default:l(()=>[t(Y,{"model-value":v(s.Name),"onUpdate:modelValue":j=>y(s.Name,j),color:i(w)},null,8,["model-value","onUpdate:modelValue","color"])]),_:2},1024)):T("",!0),t(g,{side:""},{default:l(()=>[t(ie,{edition:r.edition,character:s.Name},null,8,["edition","character"])]),_:2},1024),t(g,null,{default:l(()=>[t(x,null,{default:l(()=>[L(C(i(u)(s.Label)),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[$]])),128))],64))),128))]),_:1})]),_:1}),r.multiple?(n(),d(m,{key:0},[t(N),t(z,{class:"col-auto",align:"right"},{default:l(()=>[t(b,J({onClick:a[0]||(a[0]=()=>F()),label:i(u)("General.Accept"),disable:!R.value},i(V),{color:"primary","no-caps":""}),null,16,["label","disable"])]),_:1})],64)):T("",!0)]),_:1})]),_:1},512))}}),ye=oe(me,[["__scopeId","data-v-66d50388"]]);export{ye as default};
